rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if request.time < timestamp.date(2020, 1, 24);
    }
  }
  
  match /databases/{database}/documents/domains/{domain} {
  // Allow to increment only the 'visits' field and only by 1.
    match /_counter_shards_/{shardId} {
      allow get;
      allow write: if request.resource.data.keys() == ["visits"]
                     && (resource == null || request.resource.data.visits ==
                     resource.data.visits + 1);
    }
	}
}